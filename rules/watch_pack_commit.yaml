---
    name: "watch_pack_commit"
    description: "Watch for file changes and trigger action to reinstall packs when the git commit hash changes"
    enabled: true

    trigger:
        type: "linux.file_watch.line"
        parameters:
            file_path: /opt/stackstorm/bitovi-stackstorm-exchange/*/.git/refs/heads
    # criteria:
    #     trigger.payload_parameter_name1:
    #         type: "regex"
    #         pattern : "^value$"

    action:
        ref: "bitovi_packs.handle_pack_commit"
        parameters:
            # pack: "{{ trigger.payload }}"
            # pack_url_root: "{{ trigger.payload }}"
            # sensor_data: "{{ trigger.payload }}"
            trigger_payload: "{{ trigger.payload }}"